command: "codex"
args: []
submit_sequence: "\r"
env:
  TERM: "xterm-256color"

# Multi-strategy idle detection configuration
# Codex: Use timeout-based detection (more reliable than pattern matching)
# Pattern matching is unreliable because prompt patterns may appear in conversation history
idle_detection:
  strategy: "timeout"
  timeout: 3.0               # 3.0 seconds of no output = idle

# WAITING status detection (user input prompts)
# Detects when Codex is showing numbered choices or asking for input
waiting_detection:
  patterns:
    # Numbered choice indicators
    - "1."
    - "2."
    - "3."
    - "4."
    - "5."
    # Japanese prompts
    - "どちらの挙動"                          # Which behavior
    - "どの方針"                              # Which approach
    - "どの順で"                              # Which order
    - "どこまで対応"                          # How far to go
    - "選択肢付き質問"                        # Question with choices
    # English prompts
    - "Which option"
    - "Select one"
  require_idle: true
  idle_timeout: 0.5                           # 500ms no output after pattern
