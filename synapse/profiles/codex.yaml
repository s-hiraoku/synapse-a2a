command: "codex"
args: []
submit_sequence: "\r"
env:
  TERM: "xterm-256color"

# Multi-strategy idle detection configuration
# Codex: Use timeout-based detection (more reliable than pattern matching)
# Pattern matching is unreliable because prompt patterns may appear in conversation history
idle_detection:
  strategy: "timeout"
  timeout: 3.0               # 3.0 seconds of no output = idle

# Input ready detection for initial instructions
# Wait for this pattern before sending instructions to ensure TUI is ready
input_ready_pattern: "›"                       # Codex shows › when ready for input

# WAITING status detection (user input prompts)
# DISABLED: Current regex-based detection causes false positives
# where WAITING status gets stuck because patterns remain in output buffer
# See: https://github.com/s-hiraoku/synapse-a2a/issues/140
# waiting_detection:
#   regex: "^\\s+\\d+\\.\\s+.+$"
#   require_idle: true
#   idle_timeout: 0.5
